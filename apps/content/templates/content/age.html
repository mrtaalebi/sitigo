{% extends 'base/base.html' %}
{% load static i18n %}
{% get_current_language_bidi as LANGUAGE_BIDI %}
{% get_current_language as LANGUAGE_CODE %}
{% block extra_header %}
    <link rel="stylesheet" href="{% static 'intro/slideshow.css' %}"/>
    <style>
        .myMenu > a {
            background-color: #1f292e !important;
        }

        .mobile_menu :hover {
            background-color: rgba(0, 0, 0, 0);
        }
    </style>
{% endblock %}
{% block content %}
    <div class="ui inverted vertical masthead center aligned segment"
         style="
                 min-height:100vh;background-image: url({% static 'intro/images/bg.png' %}); background-size: cover; background-repeat: no-repeat; background-position: center;"
         id="topper">
        <div class="ui container">
            {% block navbar %}
                {% include 'base/main_navbar.html' %}
            {% endblock %}
            {% if LANGUAGE_CODE == 'en' %}
                <div class="ui stackable grid">
                    <div class="four wide column mobile-only">
                        <div class="ui inverted pointing fluid stackable menu myMenu"
                             style="border: 0; color: darkred;">
                            {% for item in prev_ages %}
                                {% if active.id == item.id %}
                                    <a class="active item" onclick="$('#{{ item.id }}').submit();" href="#">
                                        {{ item.english_name }}
                                        <form id="{{ item.id }}" name="change_active" action="{{ request.path }}"
                                              method="POST">
                                            {% csrf_token %}
                                            <input name="id" type="hidden" value="{{ item.id }}"/>
                                        </form>
                                    </a>
                                {% else %}

                                    <a class="item" onclick="$('#{{ item.id }}').submit();" href="#">
                                        {{ item.english_name }}
                                        <form id="{{ item.id }}" name="change_active" action="{{ request.path }}"
                                              method="POST">
                                            {% csrf_token %}
                                            <input name="id" type="hidden" value="{{ item.id }}"/>
                                        </form>
                                    </a>
                                {% endif %}
                            {% endfor %}
                        </div>
                    </div>
                    <div class="four wide column mobile-hidden">
                        <div class="ui inverted vertical fluid tabular menu myMenu ">
                            {% for item in prev_ages %}
                                {% if active.id == item.id %}
                                    <a class="active item" onclick="$('#{{ item.id }}').submit();" href="#">
                                        {{ item.english_name }}
                                        <form id="{{ item.id }}" name="change_active" action="{{ request.path }}"
                                              method="POST">
                                            {% csrf_token %}
                                            <input name="id" type="hidden" value="{{ item.id }}"/>
                                        </form>
                                    </a>
                                {% else %}

                                    <a class="item" onclick="$('#{{ item.id }}').submit();" href="#">
                                        {{ item.english_name }}
                                        <form id="{{ item.id }}" name="change_active" action="{{ request.path }}"
                                              method="POST">
                                            {% csrf_token %}
                                            <input name="id" type="hidden" value="{{ item.id }}"/>
                                        </form>
                                    </a>
                                {% endif %}
                            {% endfor %}
                        </div>
                        <img src="{{ active.poster.url }}" style="width: 100% ; height: 80%;">
                    </div>


                    <div class="twelve wide stretched column" style="">
                        <div class="ui inverted segment" style="background-color: #1f292e ;margin: 0" align="left">
                            <h1 class="ui header">{{ active.english_name }}</h1>

                            <p>    {{ active.english_content|safe }}</p>
                            <div class="ui  stackable grid">
                                {% for file in active.files %}
                                    <div class="ui centered two wide coloumn" style="
                                            align-items: center;padding: 20px;
                                            {#border-left:1px solid #d4d4d5;#}
                                            font-family: IRANSans
                                            ">
                                        <a href="{{ file.file.url }}" target="_blank" class="ui link download-hover "
                                           style="color: black"
                                           onclick="$('#{{ file.id }}downloader').submit();" href="#"
                                           data-position="left center" data-inverted=""
                                           style="margin-left: 15px; margin-right: 15px" id="change_lang">
                                            <i class="inverted teal download big icon" style="margin: 10px;"></i>
                                        </a>
                                        <br>
                                        <p align="center"> {{ file.file.name }}</p>

                                        <form name="downloader" id="{{ file.id }}downloader" action="/content/download/"
                                              method="POST">
                                            {% csrf_token %}
                                            <input name="file_path" type="hidden" value="{{ file.file.url }}"/>
                                            <input type="hidden" name="original_file_name"
                                                   value="{{ file.file.name }}"/>
                                        </form>
                                    </div>
                                {% endfor %}
                            </div>
                            <div class="ui stackable grid">
                                <div class="ui large images">
                                    {% for image in active.images %}

                                        <img class="ui image" src="{{ image.url }}">

                                    {% endfor %}
                                </div>

                            </div>

                        </div>
                    </div>
                </div>
            {% else %}
                <div class="ui stackable grid">
                    <div class="four wide column mobile-only">
                        <div class="ui inverted pointing fluid stackable menu myMenu"
                             style="border: 0; color: darkred;">
                            {% for item in prev_ages %}
                                {% if active.id == item.id %}
                                    <a class="active item" onclick="$('#{{ item.id }}').submit();" href="#">
                                        {{ item.persian_name }}
                                        <form id="{{ item.id }}" name="change_active" action="{{ request.path }}"
                                              method="POST">
                                            {% csrf_token %}
                                            <input name="id" type="hidden" value="{{ item.id }}"/>
                                        </form>
                                    </a>
                                {% else %}

                                    <a class="item" onclick="$('#{{ item.id }}').submit();" href="#">
                                        {{ item.persian_name }}
                                        <form id="{{ item.id }}" name="change_active" action="{{ request.path }}"
                                              method="POST">
                                            {% csrf_token %}
                                            <input name="id" type="hidden" value="{{ item.id }}"/>
                                        </form>
                                    </a>
                                {% endif %}
                            {% endfor %}

                        </div>
                    </div>
                    <div class="twelve wide  stretched column">
                        <div class="ui inverted segment" style="background-color: #1f292e">
                            <h1 class="ui header">{{ active.persian_name }}</h1>
                            <p>
                                {{ active.persian_content|safe }}
                            </p>
                            <div class="ui stackable grid" dir="rtl">
                                {% for file in active.files %}
                                    <div class="ui centered two wide coloumn" style="
                                            align-items: center;padding: 20px;
                                            {#border-left:1px solid #d4d4d5;#}
                                            font-family: IRANSans
                                            ">
                                        <a href="{{ file.url }}" target="_blank" class="ui link download-hover "
                                           style="color: black"
                                           onclick="$('#{{ file.id }}downloader').submit();" href="#"
                                           data-position="left center" data-inverted=""
                                           style="margin-left: 15px; margin-right: 15px" id="change_lang">
                                            <i class="inverted teal download big icon" style="margin: 10px;"></i>
                                        </a>
                                        <br>
                                        <p align="center"> {{ file.file.name }}</p>

                                        <form name="downloader" id="{{ file.id }}downloader" action="/content/download/"
                                              method="POST">
                                            {% csrf_token %}
                                            <input name="file_path" type="hidden" value="{{ file.file.url }}"/>
                                            <input type="hidden" name="original_file_name"
                                                   value="{{ file.file.name }}"/>
                                        </form>
                                    </div>
                                {% endfor %}
                            </div>
                        <div class="ui stackable grid">
                                <div class="ui large images">
                                    {% for image in active.images %}

                                        <img class="ui image" src="{{ image.url }}">

                                    {% endfor %}
                                </div>

                            </div>

                        </div>
                    </div>
                    <div class="four wide column mobile-hidden">
                        <div class="ui inverted vertical fluid right  tabular  menu myMenu">
                            {% for item in prev_ages %}
                                {% if active.id == item.id %}
                                    <a class="active item" onclick="$('#{{ item.id }}').submit();" href="#">
                                        {{ item.persian_name }}
                                        <form id="{{ item.id }}" name="change_active" action="{{ request.path }}"
                                              method="POST">
                                            {% csrf_token %}
                                            <input name="id" type="hidden" value="{{ item.id }}"/>
                                        </form>
                                    </a>
                                {% else %}

                                    <a class="item" onclick="$('#{{ item.id }}').submit();" href="#">
                                        {{ item.persian_name }}
                                        <form id="{{ item.id }}" name="change_active" action="{{ request.path }}"
                                              method="POST">
                                            {% csrf_token %}
                                            <input name="id" type="hidden" value="{{ item.id }}"/>
                                        </form>
                                    </a>
                                {% endif %}
                            {% endfor %}
                        </div>
                        <img src="{{ active.poster.url }}" style="width: 100% ; height: 100%;">
                    </div>

                </div>
            {% endif %}

        </div>

    </div>


    {% block extra_script %}
        <script>
            $(document).ready(function () {
                $(document).on('click', '.myMenu .item', function (e) {
                    $('.myMenu .item').removeClass('active');
                    $(this).addClass('active');
                    $(this).style.backgroundColor = "black";
                });
            });
        </script>
        <script>
            $('.myMenu .item').tab();</script>
    {% endblock %}
{% endblock %}